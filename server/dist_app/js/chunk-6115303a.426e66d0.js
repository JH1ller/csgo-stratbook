(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6115303a"],{"14b3":function(t,e,i){},"1f71":function(t,e,i){},2460:function(t,e,i){"use strict";i("1f71")},"2c63f":function(t,e,i){"use strict";i("14b3")},"47f5":function(t,e,i){"use strict";i("efd4")},"4a08":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"utility-view"},[i("map-picker",{attrs:{currentMap:t.currentMap},on:{"map-clicked":t.updateCurrentMap}}),i("UtilityList",{attrs:{utilities:t.sortedFilteredUtilitiesOfCurrentMap},on:{"open-in-lightbox":t.showLightbox,"edit-utility":t.showUtilityForm,"delete-utility":t.requestDeleteUtility,"share-utility":t.requestShareUtility,unshare:t.unshareUtility}}),i("FilterMenu",{attrs:{open:t.filterMenuOpen},on:{close:function(e){t.filterMenuOpen=!1},"clear-filters":t.clearUtilityFilters}},[i("UtilityFilterForm",{attrs:{filters:t.utilityFilters},on:{"type-filter-change":t.updateUtilityTypeFilter,"side-filter-change":t.updateUtilitySideFilter,"name-filter-change":t.updateUtilityNameFilter}})],1),i("transition",{attrs:{name:"fade"}},[t.filterMenuOpen||t.utilityFormOpen?t._e():i("div",{staticClass:"utility-view__fab-group"},[i("FilterButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"utility-view__filter-button",attrs:{activeFilterCount:t.activeUtilityFilterCount,content:"CTRL+Shift+F"},on:{click:function(e){t.filterMenuOpen=!0}}}),i("FloatingButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"utility-view__floating-add",attrs:{label:"Add utility",icon:"plus",content:"CTRL+Shift+A"},on:{click:t.showUtilityForm}})],1)]),i("transition",{attrs:{name:"fade"}},[t.lightboxOpen?i("UtilityLightbox",{attrs:{utility:t.currentLightboxUtility},on:{close:t.hideLightbox}}):t._e()],1),i("transition",{attrs:{name:"fade"}},[t.utilityFormOpen?i("UtilityForm",{attrs:{isEdit:t.utilityFormEditMode,utility:t.editUtility},on:{"submit-utility":t.utilityFormSubmitted,close:t.hideUtilityForm}}):t._e()],1)],1)},n=[],l=i("d4ec"),a=i("bee2"),o=i("262e"),r=i("2caf"),c=i("9ab4"),u=i("60a3"),p=i("80eb"),d=i("d0e2"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("BackdropDialog",[i("form",{staticClass:"utility-form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[i("FormFieldSet",[i("TextInput",{attrs:{field:t.formFields.name,fieldName:"name"},model:{value:t.formFields.name.value,callback:function(e){t.$set(t.formFields.name,"value",e)},expression:"formFields.name.value"}}),i("TextInput",{attrs:{field:t.formFields.description,fieldName:"description"},model:{value:t.formFields.description.value,callback:function(e){t.$set(t.formFields.description,"value",e)},expression:"formFields.description.value"}}),i("div",{staticClass:"utility-form__input-wrapper"},[i("TextInput",{attrs:{field:t.formFields.videoLink,fieldName:"videoLink"},model:{value:t.formFields.videoLink.value,callback:function(e){t.$set(t.formFields.videoLink,"value",e)},expression:"formFields.videoLink.value"}}),i("TextInput",{attrs:{field:t.formFields.setpos,fieldName:"setpos"},model:{value:t.formFields.setpos.value,callback:function(e){t.$set(t.formFields.setpos,"value",e)},expression:"formFields.setpos.value"}})],1)],1),i("FormFieldSet",[i("div",{staticClass:"utility-form__horizontal-wrapper"},[i("div",{staticClass:"utility-form__vertical-wrapper"},[i("label",{staticClass:"utility-form__label"},[t._v("Side")]),i("SidePicker",{model:{value:t.side,callback:function(e){t.side=e},expression:"side"}})],1),i("div",{staticClass:"utility-form__vertical-wrapper"},[i("label",{staticClass:"utility-form__label"},[t._v("Throw settings")]),i("div",{staticClass:"utility-form__config-wrapper"},[i("MouseButtonPicker",{staticClass:"utility-form__mouse-button-picker",model:{value:t.mouseButton,callback:function(e){t.mouseButton=e},expression:"mouseButton"}}),i("PosePicker",{staticClass:"utility-form__pose-picker",attrs:{crouch:t.crouch,jump:t.jump,movement:t.movement},on:{"toggle-crouch":t.toggleCrouch,"toggle-jump":t.toggleJump,"toggle-movement":t.toggleMovement}})],1)])])]),i("FormFieldSet",[i("label",{staticClass:"utility-form__label",attrs:{for:"type"}},[t._v("Type")]),i("UtilityPicker",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),i("FormFieldSet",[i("label",{staticClass:"utility-form__label"},[t._v("Screenshots")]),i("ImageUploader",{attrs:{limit:3},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1),i("div",{staticClass:"utility-form__btn-wrapper"},[i("button",{staticClass:"utility-form__btn --cancel",attrs:{type:"button"},on:{click:t.close}},[i("fa-icon",{attrs:{icon:"ban"}}),t._v(" Cancel ")],1),i("button",{staticClass:"utility-form__btn --submit",attrs:{type:"submit"}},[i("fa-icon",{attrs:{icon:"check"}}),t._v(" Save ")],1)])],1)])},h=[],y=i("2909"),f=i("3835"),v=(i("159b"),i("7db0"),i("b0c0"),i("4fad"),i("a4d3"),i("e01a"),i("04b8")),b=i("bdf2"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"utility-picker"},[s("div",{staticClass:"utility-picker__button --smoke",class:{"-selected":t.value===t.Types.SMOKE},on:{click:function(e){return t.input(t.Types.SMOKE)}}},[s("img",{staticClass:"utility-picker__icon",attrs:{src:i("d7d4")}}),s("span",{staticClass:"utility-picker__label"},[t._v("smoke")])]),s("div",{staticClass:"utility-picker__button --flash",class:{"-selected":t.value===t.Types.FLASH},on:{click:function(e){return t.input(t.Types.FLASH)}}},[s("img",{staticClass:"utility-picker__icon",attrs:{src:i("ccce")}}),s("span",{staticClass:"utility-picker__label"},[t._v("flash")])]),s("div",{staticClass:"utility-picker__button --grenade",class:{"-selected":t.value===t.Types.GRENADE},on:{click:function(e){return t.input(t.Types.GRENADE)}}},[s("img",{staticClass:"utility-picker__icon --grenade",attrs:{src:i("60b8")}}),s("span",{staticClass:"utility-picker__label"},[t._v("grenade")])]),s("div",{staticClass:"utility-picker__button --motolov",class:{"-selected":t.value===t.Types.MOLOTOV},on:{click:function(e){return t.input(t.Types.MOLOTOV)}}},[s("img",{staticClass:"utility-picker__icon --molotov",attrs:{src:i("c174")}}),s("span",{staticClass:"utility-picker__label"},[t._v("molotov")])])])},_=[],O=i("9ae4"),k=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.Types=O["a"],t}return Object(a["a"])(i,[{key:"input",value:function(t){return t}}]),i}(u["h"]);Object(c["b"])([Object(u["e"])()],k.prototype,"value",void 0),Object(c["b"])([Object(u["b"])()],k.prototype,"input",null),k=Object(c["b"])([Object(u["a"])({})],k);var j=k,S=j,F=(i("47f5"),i("2877")),C=Object(F["a"])(S,g,_,!1,null,null,null),w=C.exports,x=i("652a"),E=i("8422"),L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pose-picker"},[s("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pose-picker__wrapper",attrs:{content:"Toggle Crouch"},on:{click:t.toggleCrouch}},[t.crouch?s("img",{staticClass:"pose-picker__image",attrs:{src:i("e3bf")}}):s("img",{staticClass:"pose-picker__image",attrs:{src:i("a378")}})]),s("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pose-picker__wrapper",attrs:{content:"Toggle Movement"},on:{click:t.toggleMovement}},[t.movement===t.UtilityMovement.RUN?s("img",{staticClass:"pose-picker__image",attrs:{src:i("a800")}}):t._e(),t.movement===t.UtilityMovement.WALK?s("img",{staticClass:"pose-picker__image",attrs:{src:i("5405")}}):t._e(),t.movement===t.UtilityMovement.STILL?s("img",{staticClass:"pose-picker__image",attrs:{src:i("7a88")}}):t._e()]),s("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pose-picker__wrapper",attrs:{content:"Toggle Jump"},on:{click:t.toggleJump}},[t.jump?s("img",{staticClass:"pose-picker__image",attrs:{src:i("eb7c")}}):s("img",{staticClass:"pose-picker__image",attrs:{src:i("5405")}})])])},M=[],U=i("c0a3"),T=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.UtilityMovement=U["a"],t}return Object(a["a"])(i,[{key:"toggleCrouch",value:function(){}},{key:"toggleJump",value:function(){}},{key:"toggleMovement",value:function(){}}]),i}(u["h"]);Object(c["b"])([Object(u["e"])()],T.prototype,"crouch",void 0),Object(c["b"])([Object(u["e"])()],T.prototype,"jump",void 0),Object(c["b"])([Object(u["e"])()],T.prototype,"movement",void 0),Object(c["b"])([Object(u["b"])()],T.prototype,"toggleCrouch",null),Object(c["b"])([Object(u["b"])()],T.prototype,"toggleJump",null),Object(c["b"])([Object(u["b"])()],T.prototype,"toggleMovement",null),T=Object(c["b"])([Object(u["a"])({})],T);var I=T,A=I,N=(i("8394"),Object(F["a"])(A,L,M,!1,null,null,null)),B=N.exports,D=i("49b2"),$=i("4c1e"),R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mouse-button-picker",on:{click:function(e){!t.readonly&&t.input()}}},[s("img",{staticClass:"mouse-button-picker__image",attrs:{src:i("de74")}}),s("transition",{attrs:{name:"fade"}},[t.value===t.MouseButtons.LEFT||t.value===t.MouseButtons.LEFTRIGHT?s("img",{staticClass:"mouse-button-picker__image",attrs:{src:i("06a4")}}):t._e()]),s("transition",{attrs:{name:"fade"}},[t.value===t.MouseButtons.RIGHT||t.value===t.MouseButtons.LEFTRIGHT?s("img",{staticClass:"mouse-button-picker__image",attrs:{src:i("2f70")}}):t._e()])],1)},P=[],H=i("4444"),G=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.MouseButtons=H["a"],t}return Object(a["a"])(i,[{key:"input",value:function(){switch(this.value){case H["a"].LEFT:return H["a"].RIGHT;case H["a"].RIGHT:return H["a"].LEFTRIGHT;case H["a"].LEFTRIGHT:return H["a"].LEFT}}}]),i}(u["h"]);Object(c["b"])([Object(u["e"])({default:H["a"].LEFT})],G.prototype,"value",void 0),Object(c["b"])([Object(u["e"])({default:!1})],G.prototype,"readonly",void 0),Object(c["b"])([Object(u["b"])()],G.prototype,"input",null),G=Object(c["b"])([Object(u["a"])({})],G);var J=G,W=J,V=(i("2c63f"),Object(F["a"])(W,R,P,!1,null,null,null)),q=V.exports,K=i("f5e2"),z=i("caeb"),Y=i("0a4f"),X=i("dd8e"),Q=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.formFields={name:new z["a"]("Name",!0,[K["a"].notEmpty(),K["a"].maxLength(50)]),description:new z["a"]("Description",!1,[K["a"].maxLength(200)]),videoLink:new z["a"]("Video Link",!1,[K["a"].isYoutubeLink()]),setpos:new z["a"]("Setpos Command",!1,[K["a"].maxLength(200)])},t.type=O["a"].SMOKE,t.side=v["a"].T,t.mouseButton=H["a"].LEFT,t.crouch=!1,t.jump=!1,t.movement=U["a"].STILL,t.files=[],t}return Object(a["a"])(i,[{key:"mounted",value:function(){this.utility&&this.isEdit&&this.mapToFields()}},{key:"handleSubmit",value:function(){Object(K["b"])(this.formFields)&&(this.files.length||this.formFields.videoLink.value||this.formFields.setpos.value?this.submitUtility():this.showToast({id:"utilityForm/noMedia",text:"You need to add either an image, a videolink or a setpos command."}))}},{key:"submitUtility",value:function(){var t,e=this,i=new FormData,s=[];null===(t=this.utility)||void 0===t||t.images.forEach((function(t){e.files.find((function(e){return e===t}))||s.push(t)})),s.length&&i.append("delete",JSON.stringify(s)),this.files.forEach((function(t){"string"!==typeof t&&i.append("images",t,t.name)}));for(var n=0,l=Object.entries(this.formFields);n<l.length;n++){var a=Object(f["a"])(l[n],2),o=a[0],r=a[1];i.append(o,r.value)}return this.isEdit&&i.append("_id",this.utility._id),i.append("type",this.type),i.append("side",this.side),i.append("mouseButton",this.mouseButton),i.append("crouch",JSON.stringify(this.crouch)),i.append("jump",JSON.stringify(this.jump)),i.append("movement",this.movement),i}},{key:"mapToFields",value:function(){var t,e,i,s;this.formFields.name.value=this.utility.name,this.formFields.description.value=null!==(e=this.utility.description)&&void 0!==e?e:"",this.formFields.videoLink.value=null!==(i=this.utility.videoLink)&&void 0!==i?i:"",this.formFields.setpos.value=null!==(s=this.utility.setpos)&&void 0!==s?s:"",this.type=this.utility.type,this.side=this.utility.side,this.mouseButton=this.utility.mouseButton,this.crouch=this.utility.crouch,this.jump=this.utility.jump,this.movement=this.utility.movement,(t=this.files).push.apply(t,Object(y["a"])(this.utility.images))}},{key:"toggleCrouch",value:function(){this.crouch=!this.crouch}},{key:"toggleJump",value:function(){this.jump=!this.jump}},{key:"toggleMovement",value:function(){switch(this.movement){case U["a"].STILL:this.movement=U["a"].WALK;break;case U["a"].WALK:this.movement=U["a"].RUN;break;case U["a"].RUN:this.movement=U["a"].STILL;break}}}]),i}(Object(u["d"])(X["a"]));Object(c["b"])([Y["a"].Action],Q.prototype,"showToast",void 0),Object(c["b"])([Object(u["e"])()],Q.prototype,"utility",void 0),Object(c["b"])([Object(u["e"])()],Q.prototype,"isEdit",void 0),Object(c["b"])([Object(u["b"])()],Q.prototype,"submitUtility",null),Q=Object(c["b"])([Object(u["a"])({components:{SidePicker:b["a"],BackdropDialog:x["a"],TextInput:$["a"],UtilityPicker:w,FormFieldSet:D["a"],ImageUploader:E["a"],MouseButtonPicker:q,PosePicker:B}})],Q);var Z=Q,tt=Z,et=(i("a3ef"),Object(F["a"])(tt,m,h,!1,null,null,null)),it=et.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"utility-list"},[t._l(t.utilities,(function(e,s){return i("UtilityItem",{key:e._id,staticClass:"utility-list__item",style:{"animation-delay":.025*s+"s"},attrs:{utility:e},on:{"open-in-lightbox":t.openInLightbox,"open-menu":function(i){return t.openMenu(i,e)}}})})),i("vue-context",{ref:"menu",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return[i("li",[i("a",{on:{click:function(e){return e.preventDefault(),t.editUtility(s.utility)}}},[i("fa-icon",{attrs:{icon:"edit"}}),t._v("Edit")],1)]),i("li",{attrs:{"data-context-setpos":""}},[i("a",{on:{click:function(e){return e.preventDefault(),t.copySetpos(s.utility)}}},[i("fa-icon",{attrs:{icon:"map-marker-alt"}}),t._v("Copy Setpos")],1)]),i("li",[i("a",{on:{click:function(e){return e.preventDefault(),t.shareUtility(s.utility)}}},[i("fa-icon",{attrs:{icon:"share-alt"}}),t._v(t._s(s&&s.utility.shared?"Unshare":"Share"))],1)]),i("li",[i("a",{on:{click:function(e){return e.preventDefault(),t.deleteUtility(s.utility)}}},[i("fa-icon",{attrs:{icon:"trash-alt"}}),t._v("Delete")],1)])]}}])})],2)},nt=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"utility-item",on:{click:t.openInLightbox}},[t.utilityImage?s("SmartImage",{staticClass:"utility-item__image",attrs:{src:t.utilityImage,alt:"Utility thumbnail"}}):s("div",{staticClass:"utility-item__image utility-item__copy-wrapper"},[s("fa-icon",{staticClass:"utility-item__icon-copy",attrs:{icon:"expand"}})],1),s("div",{staticClass:"utility-item__side-wrapper"},[t.utility.side===t.Sides.T?s("img",{staticClass:"utility-item__side",attrs:{src:i("0545")}}):s("img",{staticClass:"utility-item__side",attrs:{src:i("5326")}})]),s("UtilityTypeDisplay",{staticClass:"utility-item__type",attrs:{type:t.utility.type}}),s("span",{staticClass:"utility-item__info"},[s("div",{staticClass:"utility-item__name"},[t._v(t._s(t.utility.name))]),s("button",{staticClass:"utility-item__context",on:{click:t.openMenu}},[s("fa-icon",{attrs:{icon:"ellipsis-v"}})],1)])],1)},at=[],ot=i("d079"),rt=i("03ae"),ct=i("fb09"),ut=i("5b19"),pt=i("ed7c"),dt=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.UtilityMovement=U["a"],t.Sides=v["a"],t.getThumbnailURL=ut["d"],t.extractVideoId=ut["b"],t}return Object(a["a"])(i,[{key:"utilityImage",get:function(){return this.utility.images.length?Object(ot["a"])(this.utility.images[0]):this.utility.videoLink?Object(ut["d"])(Object(ut["b"])(this.utility.videoLink)):void 0}},{key:"openInLightbox",value:function(){return this.utility}},{key:"openMenu",value:function(t){return t}}]),i}(u["h"]);Object(c["b"])([Object(u["e"])()],dt.prototype,"utility",void 0),Object(c["b"])([Object(u["b"])()],dt.prototype,"openInLightbox",null),Object(c["b"])([Object(u["b"])()],dt.prototype,"openMenu",null),dt=Object(c["b"])([Object(u["a"])({components:{MouseButtonDisplay:rt["a"],UtilityTypeDisplay:ct["a"],SmartImage:pt["a"]}})],dt);var mt=dt,ht=mt,yt=(i("88c9"),Object(F["a"])(ht,lt,at,!1,null,null,null)),ft=yt.exports,vt=i("899b"),bt=i("60ae"),gt=i("fe87"),_t=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.trackingService=bt["a"].getInstance(),t}return Object(a["a"])(i,[{key:"openInLightbox",value:function(t){return t}},{key:"editUtility",value:function(t){return t}},{key:"shareUtility",value:function(t){return t}},{key:"deleteUtility",value:function(t){return t}},{key:"copySetpos",value:function(t){Object(gt["a"])(t.setpos),this.showToast({id:"utilityList/copySetpos",text:"Setpos Command copied!"}),this.trackingService.track("Action: Copy Setpos",{from:"context-menu"})}},{key:"openMenu",value:function(t,e){t.preventDefault(),t.stopImmediatePropagation(),this.menu.open(t,{utility:e});var i=document.querySelector("[data-context-setpos]");e.setpos?null===i||void 0===i||i.classList.remove("hidden"):null===i||void 0===i||i.classList.add("hidden")}}]),i}(u["h"]);Object(c["b"])([Y["a"].Action],_t.prototype,"showToast",void 0),Object(c["b"])([Object(u["e"])()],_t.prototype,"utilities",void 0),Object(c["b"])([Object(u["g"])()],_t.prototype,"menu",void 0),Object(c["b"])([Object(u["b"])()],_t.prototype,"openInLightbox",null),Object(c["b"])([Object(u["b"])()],_t.prototype,"editUtility",null),Object(c["b"])([Object(u["b"])()],_t.prototype,"shareUtility",null),Object(c["b"])([Object(u["b"])()],_t.prototype,"deleteUtility",null),_t=Object(c["b"])([Object(u["a"])({components:{UtilityItem:ft,VueContext:vt["a"]}})],_t);var Ot=_t,kt=Ot,jt=(i("add1"),Object(F["a"])(kt,st,nt,!1,null,null,null)),St=jt.exports,Ft=i("ad95"),Ct=i("28bc"),wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"utility-filter-form"},[i("label",{staticClass:"utility-filter-form__label",attrs:{for:"name"}},[t._v("Utility name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nameFilter,expression:"nameFilter"}],staticClass:"utility-filter-form__input",attrs:{type:"text"},domProps:{value:t.nameFilter},on:{input:function(e){e.target.composing||(t.nameFilter=e.target.value)}}}),i("label",{staticClass:"utility-filter-form__label"},[t._v("Side")]),i("SidePicker",{staticClass:"utility-filter-form__picker",model:{value:t.sideFilter,callback:function(e){t.sideFilter=e},expression:"sideFilter"}}),i("label",{staticClass:"utility-filter-form__label",attrs:{for:"type"}},[t._v("Type")]),i("UtilityPicker",{staticClass:"utility-filter-form__picker",model:{value:t.typeFilter,callback:function(e){t.typeFilter=e},expression:"typeFilter"}})],1)},xt=[],Et=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){return Object(l["a"])(this,i),e.apply(this,arguments)}return Object(a["a"])(i,[{key:"nameFilter",get:function(){return this.filters.name},set:function(t){this.$emit("name-filter-change",t)}},{key:"typeFilter",get:function(){return this.filters.type},set:function(t){this.filters.type===t?this.$emit("type-filter-change",null):this.$emit("type-filter-change",t)}},{key:"sideFilter",get:function(){return this.filters.side},set:function(t){this.filters.side===t?this.$emit("side-filter-change",null):this.$emit("side-filter-change",t)}}]),i}(u["h"]);Object(c["b"])([Object(u["e"])()],Et.prototype,"filters",void 0),Et=Object(c["b"])([Object(u["a"])({components:{SidePicker:b["a"],UtilityPicker:w}})],Et);var Lt=Et,Mt=Lt,Ut=(i("2460"),Object(F["a"])(Mt,wt,xt,!1,null,null,null)),Tt=Ut.exports,It=i("8971"),At=i("b01f"),Nt=i("2398"),Bt=function(t){Object(o["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.shortcutService=Nt["a"].getInstance(),t.utilityFormOpen=!1,t.utilityFormEditMode=!1,t.editUtility=null,t.lightboxOpen=!1,t.currentLightboxUtility=null,t.filterMenuOpen=!1,t}return Object(a["a"])(i,[{key:"created",value:function(){var t=this;this.shortcutService.add([{shortcut:"Ctrl+Shift+F",handler:function(){return t.execShortcut(t.toggleFilterMenu)}},{shortcut:"Ctrl+Shift+A",handler:function(){return t.execShortcut(t.showUtilityForm)}}])}},{key:"beforeDestroy",value:function(){this.shortcutService.reset()}},{key:"execShortcut",value:function(t){if(!this.utilityFormOpen)return t(),!0}},{key:"utilityFormSubmitted",value:function(t){t.has("_id")?this.updateUtility(t):this.createUtility(t),this.hideUtilityForm()}},{key:"requestDeleteUtility",value:function(t){var e=this;Object(At["a"])(this.showDialog({key:"utility-view/confirm-delete",text:"Are you sure you want to delete this utility?"}),(function(){return e.deleteUtility(t._id)}))}},{key:"requestShareUtility",value:function(t){var e=this;Object(At["a"])(this.showDialog({key:"utility-view/confirm-share",text:"Do you want to create a share-link to let other teams add this utility to their stratbook?"}),(function(){return e.shareUtility(t._id)}))}},{key:"showUtilityForm",value:function(t){this.utilityFormOpen=!0,this.filterMenuOpen=!1,this.editUtility=(null===t||void 0===t?void 0:t._id)?t:null,this.utilityFormEditMode=!!(null===t||void 0===t?void 0:t._id)}},{key:"hideUtilityForm",value:function(){this.utilityFormOpen=!1}},{key:"showLightbox",value:function(t){this.currentLightboxUtility=t,this.lightboxOpen=!0}},{key:"hideLightbox",value:function(){this.currentLightboxUtility=null,this.lightboxOpen=!1}},{key:"toggleFilterMenu",value:function(){this.filterMenuOpen=!this.filterMenuOpen}}]),i}(u["h"]);Object(c["b"])([Y["d"].State],Bt.prototype,"currentMap",void 0),Object(c["b"])([Y["g"].Getter],Bt.prototype,"sortedFilteredUtilitiesOfCurrentMap",void 0),Object(c["b"])([Y["d"].Action],Bt.prototype,"updateCurrentMap",void 0),Object(c["b"])([Y["a"].Action],Bt.prototype,"showDialog",void 0),Object(c["b"])([Y["c"].State],Bt.prototype,"utilityFilters",void 0),Object(c["b"])([Y["c"].Getter],Bt.prototype,"activeUtilityFilterCount",void 0),Object(c["b"])([Y["c"].Action],Bt.prototype,"updateUtilityTypeFilter",void 0),Object(c["b"])([Y["c"].Action],Bt.prototype,"updateUtilityNameFilter",void 0),Object(c["b"])([Y["c"].Action],Bt.prototype,"updateUtilitySideFilter",void 0),Object(c["b"])([Y["c"].Action],Bt.prototype,"clearUtilityFilters",void 0),Object(c["b"])([Y["g"].Action],Bt.prototype,"updateUtility",void 0),Object(c["b"])([Y["g"].Action],Bt.prototype,"createUtility",void 0),Object(c["b"])([Y["g"].Action],Bt.prototype,"deleteUtility",void 0),Object(c["b"])([Y["g"].Action],Bt.prototype,"shareUtility",void 0),Object(c["b"])([Y["g"].Action],Bt.prototype,"unshareUtility",void 0),Bt=Object(c["b"])([Object(u["a"])({components:{MapPicker:p["a"],FloatingButton:d["a"],UtilityForm:it,UtilityList:St,UtilityLightbox:Ft["a"],FilterButton:Ct["a"],UtilityFilterForm:Tt,FilterMenu:It["a"]}})],Bt);var Dt=Bt,$t=Dt,Rt=(i("dd43"),Object(F["a"])($t,s,n,!1,null,null,null));e["default"]=Rt.exports},7039:function(t,e,i){},"7b2b":function(t,e,i){},"7da9":function(t,e,i){},8394:function(t,e,i){"use strict";i("7da9")},8422:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-uploader"},[i("label",{staticClass:"image-uploader__input"},[i("input",{attrs:{type:"file",id:"file",multiple:t.limit>1,accept:"image/*",disabled:t.value.length>=t.limit},on:{change:t.filesSelected}}),i("span",{attrs:{"file-input-value":t.fileString}})]),i("div",{staticClass:"image-uploader__preview"},[t._l(t.images,(function(e){return i("div",{key:e.uri,staticClass:"image-uploader__preview-item"},[i("img",{staticClass:"image-uploader__image",attrs:{src:e.uri,alt:""}}),i("fa-icon",{staticClass:"image-uploader__icon",attrs:{icon:"times"},on:{click:function(i){return t.removeImage(e)}}})],1)})),i("span",{staticClass:"image-uploader__preview-placeholder",class:{"-has-content":t.images.length}},[t._v("No images selected")])],2)])},n=[],l=i("2909"),a=i("d4ec"),o=i("bee2"),r=i("262e"),c=i("2caf"),u=(i("a630"),i("3ca3"),i("99af"),i("4de4"),i("caad"),i("2532"),i("159b"),i("9ab4")),p=i("60a3"),d=i("d079"),m=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.images=[],t}return Object(o["a"])(i,[{key:"filesSelected",value:function(t){var e=Array.from(t.target.files);e.length&&this.input([].concat(Object(l["a"])(this.value),Object(l["a"])(e)))}},{key:"removeImage",value:function(t){this.input(this.value.filter((function(e){return t.file?e!==t.file:!t.uri.includes(e)})))}},{key:"fileString",get:function(){return this.value.length?"".concat(this.value.length," file").concat(this.value.length>1?"s":""," selected. ").concat(this.value.length>this.limit?"Remove ".concat(this.value.length-this.limit," file").concat(this.value.length>1?"s":"","."):""):"Choose ".concat(this.limit>1?"up to "+this.limit:"a"," file").concat(this.limit>1?"s":"","...")}},{key:"input",value:function(t){return t}},{key:"filesChanged",value:function(t){var e=this;this.images=[],t.forEach((function(t){if("string"===typeof t)e.images.push({uri:Object(d["a"])(t)});else{var i=new FileReader;i.onload=function(){e.images.push({file:t,uri:i.result})},i.readAsDataURL(t)}}))}}]),i}(p["h"]);Object(u["b"])([Object(p["e"])()],m.prototype,"value",void 0),Object(u["b"])([Object(p["e"])({default:1})],m.prototype,"limit",void 0),Object(u["b"])([Object(p["b"])()],m.prototype,"input",null),Object(u["b"])([Object(p["i"])("value")],m.prototype,"filesChanged",null),m=Object(u["b"])([Object(p["a"])({})],m);var h=m,y=h,f=(i("e1ef"),i("2877")),v=Object(f["a"])(y,s,n,!1,null,null,null);e["a"]=v.exports},"88c9":function(t,e,i){"use strict";i("7039")},"899b":function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var s=i("2b0e"),n="2.2.2",l=/^2\./.test(s["default"].version);l||s["default"].util.warn("VueClickaway "+n+" only supports Vue 2.x, and does not support Vue "+s["default"].version);var a="_vue_clickaway_handler";function o(t,e,i){r(t);var s=i.context,n=e.value;if("function"===typeof n){var l=!1;setTimeout((function(){l=!0}),0),t[a]=function(e){var i=e.path||(e.composedPath?e.composedPath():void 0);if(l&&(i?i.indexOf(t)<0:!t.contains(e.target)))return n.call(s,e)},document.documentElement.addEventListener("click",t[a],!1)}}function r(t){document.documentElement.removeEventListener("click",t[a],!1),delete t[a]}var c={bind:o,update:function(t,e){e.value!==e.oldValue&&o(t,e)},unbind:r};Array.from||(Array.from=t=>[].slice.call(t)),Array.isArray||(Array.isArray=t=>"[object Array]"===Object.prototype.toString.call(t));const u=Array.from,p=Array.isArray,d={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40},m=(t,e)=>!(!t||"function"!==typeof t.contains)&&t.contains(e),h=(t,e,i)=>{t&&t.addEventListener&&t.addEventListener(e,i)},y=(t,e,i)=>{t&&t.removeEventListener&&t.removeEventListener(e,i)},f=t=>(t||[]).filter(g),v=t=>b(t)?t.getBoundingClientRect():null,b=t=>Boolean(t&&t.nodeType===Node.ELEMENT_NODE),g=t=>{if(!b(t)||!m(document.body,t))return!1;if("none"===t.style.display)return!1;const e=v(t);return Boolean(e&&e.height>0&&e.width>0)},_=(t,e)=>u((b(e)?e:document).querySelectorAll(t)),O=(t,e,i)=>{e&&b(t)&&t.setAttribute(e,i)},k=(t,e)=>{let i=t.parentElement;while(null!==i&&!i.classList.contains(e))i=i.parentElement;return i},j=(t,e={},i={},s={})=>{const n=i[t]||s[t];return"function"===typeof n?n(e):n};var S={directives:{onClickaway:c},props:{closeOnClick:{type:Boolean,default:!0},closeOnScroll:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},itemSelector:{type:[String,Array],default:()=>[".v-context-item",".v-context > li > a"]},role:{type:String,default:"menu"},subMenuOffset:{type:Number,default:10},useScrollHeight:{type:Boolean,default:!1},useScrollWidth:{type:Boolean,default:!1},heightOffset:{type:Number,default:25},widthOffset:{type:Number,default:25},tag:{type:String,default:"ul"}},computed:{style(){return this.show?{top:this.top+"px",left:this.left+"px"}:null}},data(){return{top:null,left:null,show:!1,data:null,localItemSelector:"",activeSubMenu:null}},created(){this.localItemSelector=this.mapItemSelector(this.itemSelector)},beforeDestroy(){this.closeOnScroll&&this.removeScrollEventListener()},methods:{addScrollEventListener(){h(window,"scroll",this.close)},addHoverEventListener(t){t.querySelectorAll(".v-context__sub").forEach(t=>{h(t,"mouseenter",this.openSubMenu),h(t,"mouseleave",this.closeSubMenu)})},close(){if(this.show){while(null!==this.activeSubMenu)k(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));this.resetData(),this.removeHoverEventListener(this.$el),this.closeOnScroll&&this.removeScrollEventListener(),this.$emit("close")}},focusItem(t,e){const i=e.find((e,i)=>i===t);i&&i.focus()},focusNext(t,e){this.show&&(t.preventDefault(),t.stopPropagation(),this.$nextTick(()=>{const i=this.getItems();if(i.length<1)return;let s=i.indexOf(t.target);e&&s>0?s--:!e&&s<i.length-1&&s++,s<0&&(s=0),this.focusItem(s,i)}))},getItems(){return f(_(this.localItemSelector,this.activeSubMenu||this.$el))},mapItemSelector(t){return p(t)&&(t=t.map(t=>t+":not(.disabled):not([disabled])").join(", ")),t},onClick(){this.close()},onKeydown(t){const e=t.keyCode;if(e===d.ESC)this.close();else if(e===d.DOWN)this.focusNext(t,!1);else if(e===d.UP)this.focusNext(t,!0);else if(e===d.RIGHT){const e=k(t.target,"v-context__sub");e&&e.getElementsByClassName("v-context")[0]!==this.activeSubMenu&&(e.dispatchEvent(new Event("mouseenter")),this.focusNext(t,!1))}else if(e===d.LEFT){if(!this.activeSubMenu)return;const t=k(this.activeSubMenu,"v-context__sub");t.dispatchEvent(new Event("mouseleave"));const e=this.getItems(),i=e.indexOf(t.getElementsByTagName("a")[0]);this.focusItem(i,e)}},open(t,e){this.data=e,this.show=!0,this.$nextTick(()=>{[this.top,this.left]=this.positionMenu(t.clientY,t.clientX,this.$el),this.$el.focus(),this.setItemRoles(),this.addHoverEventListener(this.$el),this.closeOnScroll&&this.addScrollEventListener(),this.$emit("open",t,this.data,this.top,this.left)})},openSubMenu(t){const e=this.getSubMenuElementByEvent(t),i=k(e.parentElement,"v-context"),s=v(t.target);if(this.activeSubMenu!==i)while(null!==this.activeSubMenu&&this.activeSubMenu!==i&&this.activeSubMenu!==e)k(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));e.style.display="block";let[n,l]=this.positionMenu(s.top,s.right-this.subMenuOffset,e);e.style.left=l+"px",e.style.top=n+"px",this.activeSubMenu=e},closeSubMenu(t){const e=this.getSubMenuElementByEvent(t),i=k(e,"v-context");if(this.activeSubMenu!==e)while(null!==this.activeSubMenu&&this.activeSubMenu!==e)k(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));e.style.display="none",this.activeSubMenu=i&&k(i,"v-context__sub")?i:null},getSubMenuElementByEvent(t){return t.target.getElementsByTagName("ul")[0]},positionMenu(t,e,i){const s=this.useScrollHeight?i.scrollHeight:i.offsetHeight,n=window.innerHeight-s-this.heightOffset,l=this.useScrollWidth?i.scrollWidth:i.offsetWidth,a=window.innerWidth-l-this.widthOffset;return t>n&&(t=n),e>a&&(e=a),[t,e]},removeScrollEventListener(){y(window,"scroll",this.close)},removeHoverEventListener(t){t.querySelectorAll(".v-context__sub").forEach(t=>{y(t,"mouseenter",this.openSubMenu),y(t,"mouseleave",this.closeSubMenu)})},resetData(){this.top=null,this.left=null,this.data=null,this.show=!1},setItemRoles(){_(this.localItemSelector,this.$el).forEach(t=>{O(t,"role","menuitem"),O(t,"tabindex","-1")})}},watch:{closeOnScroll(t,e){t!==e&&(t&&this.show?this.addScrollEventListener():this.removeScrollEventListener())},itemSelector(t,e){t!==e&&(this.localItemSelector=this.mapItemSelector(t))}},render(t){if(this.lazy&&!this.show)return t(!1);const e={"!contextmenu":t=>{t.preventDefault()},keydown:this.onKeydown};this.closeOnClick&&(e.click=this.onClick);const i=[{name:"on-clickaway",value:this.close,rawName:"v-on-clickaway"}];return this.lazy||i.push({name:"show",value:this.show,rawName:"v-show",expression:"show"}),t(this.tag,{staticClass:"v-context",style:this.style,attrs:{tabindex:"-1",role:this.role,"aria-hidden":this.lazy?null:String(!this.show)},on:e,directives:i},[j("default",{data:this.data},this.$scopedSlots,this.$slots)])}}},a3ef:function(t,e,i){"use strict";i("7b2b")},add1:function(t,e,i){"use strict";i("d97c")},d97c:function(t,e,i){},dc15:function(t,e,i){},dd43:function(t,e,i){"use strict";i("dc15")},e0f5:function(t,e,i){},e1ef:function(t,e,i){"use strict";i("e0f5")},efd4:function(t,e,i){}}]);