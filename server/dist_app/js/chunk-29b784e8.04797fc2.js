(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b784e8"],{"0163":function(e,t,a){"use strict";var i=a("a57e"),l=a.n(i);l.a},"04a3":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");var i=a("06c5");function l(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(i["a"])(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r,n=!0,o=!1;return{s:function(){l=e[Symbol.iterator]()},n:function(){var e=l.next();return n=e.done,e},e:function(e){o=!0,r=e},f:function(){try{n||null==l["return"]||l["return"]()}finally{if(o)throw r}}}}var r=function(e){var t,a=l(e);try{for(a.s();!(t=a.n()).done;){t.value;return!1}}catch(i){a.e(i)}finally{a.f()}return!0}},"0d88":function(e,t,a){},8308:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile-view"},[a("div",{staticClass:"profile-view__content"},[a("ProfileForm",{staticClass:"profile-view__detail",attrs:{profile:e.profile},on:{submit:e.updateProfile}}),a("img",{staticClass:"profile-view__avatar",attrs:{src:e.avatar,alt:"Current User Avatar"}}),a("button",{staticClass:"profile-view__logout",on:{click:e.logoutRequest}},[e._v("Logout")])],1)])},l=[],r=(a("96cf"),a("1da1")),n=a("d4ec"),o=a("bee2"),s=a("2caf"),u=a("262e"),c=a("9ab4"),f=a("60a3"),p=a("6c7d"),d=a("0a4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"profile-form",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("h2",{staticClass:"profile-form__headline"},[e._v("Edit profile")]),a("TextInput",{staticClass:"profile-form__input",attrs:{field:e.formFields.name,fieldName:"name"},model:{value:e.formFields.name.value,callback:function(t){e.$set(e.formFields.name,"value",t)},expression:"formFields.name.value"}}),a("TextInput",{staticClass:"profile-form__input",attrs:{field:e.formFields.email,fieldName:"email"},model:{value:e.formFields.email.value,callback:function(t){e.$set(e.formFields.email,"value",t)},expression:"formFields.email.value"}}),a("TextInput",{staticClass:"profile-form__input",attrs:{field:e.formFields.password,type:"password",fieldName:"password"},model:{value:e.formFields.password.value,callback:function(t){e.$set(e.formFields.password,"value",t)},expression:"formFields.password.value"}}),a("TextInput",{staticClass:"profile-form__input",attrs:{field:e.repeatField,type:"password",fieldName:"password-repeat"},model:{value:e.repeatField.value,callback:function(t){e.$set(e.repeatField,"value",t)},expression:"repeatField.value"}}),a("p",{staticClass:"profile-form__label"},[e._v("Change avatar:")]),a("ImageUploader",{staticClass:"profile-form__uploader",attrs:{limit:1},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),a("button",{staticClass:"profile-form__btn-save",attrs:{type:"submit"}},[e._v("Save")])],1)},v=[],b=(a("b0c0"),a("4fad"),a("d3b7"),a("ddb0"),a("3835")),h=a("4c1e"),g=a("8422"),y=a("04a3"),_=a("caeb"),j=a("f5e2"),w=function(e){Object(u["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.formFields={name:new _["a"]("Name",!1,[]),email:new _["a"]("Email",!1,[]),password:new _["a"]("New password",!1,[])},e.repeatField=new _["a"]("Repeat new password",!1,[j["a"].matches(e.formFields.password)]),e.files=[],e}return Object(o["a"])(a,[{key:"mounted",value:function(){this.mapToFields()}},{key:"profileUpdated",value:function(){this.mapToFields()}},{key:"mapToFields",value:function(){this.formFields.name.value=this.profile.name,this.formFields.email.value=this.profile.email,this.formFields.password.value="",this.repeatField.value="",this.files=[]}},{key:"handleSubmit",value:function(){this.repeatField.validate()&&this.submit()}},{key:"submit",value:function(){var e=new FormData;this.files.length&&e.append("avatar",this.files[0],this.files[0].name);for(var t=0,a=Object.entries(this.formFields);t<a.length;t++){var i=Object(b["a"])(a[t],2),l=i[0],r=i[1];r.value&&r.value!==this.profile[l]&&e.append(l,r.value)}Object(y["a"])(e.keys())||this.$emit("submit",e)}}]),a}(f["h"]);Object(c["a"])([Object(f["e"])()],w.prototype,"profile",void 0),Object(c["a"])([Object(f["i"])("profile")],w.prototype,"profileUpdated",null),w=Object(c["a"])([Object(f["a"])({components:{TextInput:h["a"],ImageUploader:g["a"]}})],w);var O=w,F=O,C=(a("0163"),a("2877")),k=Object(C["a"])(F,m,v,!1,null,null,null),x=k.exports,S=a("d079"),I=function(e){Object(u["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"logoutRequest",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.logout();case 2:this.$router.push(p["b"].Login);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=!!this.$route.query.confirmed;e&&this.showToast({id:"ProfileView/emailConfirmed",text:"Your new email has been confirmed."})}},{key:"avatar",get:function(){return Object(S["a"])(this.profile.avatar)}}]),a}(f["h"]);Object(c["a"])([d["a"].Action],I.prototype,"showToast",void 0),Object(c["a"])([d["b"].State],I.prototype,"profile",void 0),Object(c["a"])([d["b"].Action],I.prototype,"logout",void 0),Object(c["a"])([d["b"].Action],I.prototype,"updateProfile",void 0),I=Object(c["a"])([Object(f["a"])({components:{ProfileForm:x}})],I);var T=I,$=T,A=(a("8f63"),Object(C["a"])($,i,l,!1,null,null,null));t["default"]=A.exports},8422:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-uploader"},[a("label",{staticClass:"image-uploader__input"},[a("input",{attrs:{type:"file",id:"file",multiple:e.limit>1,accept:"image/*",disabled:e.value.length>=e.limit},on:{change:e.filesSelected}}),a("span",{attrs:{"file-input-value":e.fileString}})]),a("div",{staticClass:"image-uploader__preview"},[e._l(e.images,(function(t){return a("div",{key:t.uri,staticClass:"image-uploader__preview-item"},[a("img",{staticClass:"image-uploader__image",attrs:{src:t.uri,alt:""}}),a("fa-icon",{staticClass:"image-uploader__icon",attrs:{icon:"times"},on:{click:function(a){return e.removeImage(t)}}})],1)})),a("span",{staticClass:"image-uploader__preview-placeholder",class:{"-has-content":e.images.length}},[e._v("No images selected")])],2)])},l=[],r=(a("99af"),a("4de4"),a("4160"),a("a630"),a("3ca3"),a("159b"),a("2909")),n=a("d4ec"),o=a("bee2"),s=a("2caf"),u=a("262e"),c=a("9ab4"),f=a("60a3"),p=function(e){Object(u["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.images=[],e}return Object(o["a"])(a,[{key:"filesSelected",value:function(e){var t=Array.from(e.target.files);t.length&&this.input([].concat(Object(r["a"])(this.value),Object(r["a"])(t)))}},{key:"removeImage",value:function(e){this.input(this.value.filter((function(t){return t!==e.file})))}},{key:"input",value:function(e){return e}},{key:"filesChanged",value:function(e){var t=this;this.images=[],e.forEach((function(e){var a=new FileReader;a.onload=function(){return t.images.push({file:e,uri:a.result})},a.readAsDataURL(e)}))}},{key:"fileString",get:function(){return this.value.length?"".concat(this.value.length," file").concat(this.value.length>1?"s":""," selected. ").concat(this.value.length>this.limit?"Remove ".concat(this.value.length-this.limit," file").concat(this.value.length>1?"s":"","."):""):"Choose ".concat(this.limit>1?"up to "+this.limit:"a"," file").concat(this.limit>1?"s":"","...")}}]),a}(f["h"]);Object(c["a"])([Object(f["e"])()],p.prototype,"value",void 0),Object(c["a"])([Object(f["e"])({default:1})],p.prototype,"limit",void 0),Object(c["a"])([Object(f["b"])()],p.prototype,"input",null),Object(c["a"])([Object(f["i"])("value")],p.prototype,"filesChanged",null),p=Object(c["a"])([Object(f["a"])({})],p);var d=p,m=d,v=(a("e1ef"),a("2877")),b=Object(v["a"])(m,i,l,!1,null,null,null);t["a"]=b.exports},"8f63":function(e,t,a){"use strict";var i=a("0d88"),l=a.n(i);l.a},a57e:function(e,t,a){},e0f5:function(e,t,a){},e1ef:function(e,t,a){"use strict";var i=a("e0f5"),l=a.n(i);l.a}}]);
//# sourceMappingURL=chunk-29b784e8.04797fc2.js.map